<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ì¶œì„±í˜• ì…‹ì—… ì‹œê°„ ë‹¨ì¶• ë¯¸ì…˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .progress-section {
            padding: 30px;
            background: #f8f9fa;
            border-bottom: 3px solid #dee2e6;
        }

        .progress-container {
            background: #e9ecef;
            border-radius: 25px;
            height: 25px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 25px;
        }

        .goals {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .goal-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-left: 5px solid #007bff;
            transition: transform 0.3s ease;
        }

        .goal-card:hover {
            transform: translateY(-5px);
        }

        .goal-card.achieved {
            border-left-color: #28a745;
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
        }

        .goal-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 10px;
        }

        .goal-card.achieved .goal-title {
            color: #28a745;
        }

        .goal-time {
            font-size: 2em;
            font-weight: bold;
            color: #dc3545;
            margin: 10px 0;
        }

        .goal-card.achieved .goal-time {
            color: #28a745;
        }

        .capd-section {
            padding: 30px;
        }

        .capd-step {
            margin-bottom: 30px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .capd-step.completed {
            border-color: #28a745;
            background: linear-gradient(135deg, #d4edda, #f8f9fa);
        }

        .step-header {
            background: #007bff;
            color: white;
            padding: 20px;
            cursor: pointer;
            font-size: 1.3em;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .capd-step.completed .step-header {
            background: #28a745;
        }

        .step-content {
            padding: 25px;
            display: none;
        }

        .step-content.active {
            display: block;
        }

        .checklist {
            list-style: none;
        }

        .checklist li {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .checklist li:hover {
            background: #e9ecef;
        }

        .checklist input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            cursor: pointer;
        }

        .complete-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .complete-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .complete-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

        .achievement-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .achievement-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            margin: 20px;
            animation: bounceIn 0.5s ease;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        .achievement-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .achievement-title {
            font-size: 2em;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 15px;
        }

        .achievement-message {
            font-size: 1.1em;
            color: #495057;
            margin-bottom: 25px;
            line-height: 1.6;
            text-align: left;
        }

        .continue-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #007bff;
        }

        .stat-label {
            color: #6c757d;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ ì…‹ì—… ë§ˆìŠ¤í„° ë¯¸ì…˜</h1>
            <p>ì»¨ë„¥í„° ì‚¬ì¶œì„±í˜• ì…‹ì—… ì‹œê°„ ë‹¨ì¶• í”„ë¡œì íŠ¸</p>
            <div style="margin-top: 20px;">
                <div style="display: flex; gap: 15px; justify-content: center; align-items: center; flex-wrap: wrap;">
                    <input type="text" id="workerName" placeholder="ì‘ì—…ì ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" 
                           style="padding: 12px 20px; font-size: 1.1em; border: none; border-radius: 25px; 
                                  width: 250px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="color: white; font-weight: bold;">í˜„ì¬ ì…‹ì—…ì‹œê°„:</span>
                        <input type="number" id="currentSetupTime" placeholder="ì˜ˆ: 40" min="1" max="180"
                               style="padding: 12px 15px; font-size: 1.1em; border: none; border-radius: 25px; 
                                      width: 80px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">
                        <span style="color: white; font-weight: bold;">ë¶„</span>
                    </div>
                </div>
                <button onclick="setWorkerName()" id="nameBtn"
                        style="margin-top: 15px; padding: 12px 25px; background: #28a745; color: white; 
                               border: none; border-radius: 25px; font-size: 1.1em; cursor: pointer;">
                    ë¯¸ì…˜ ì‹œì‘í•˜ê¸°
                </button>
            </div>
            <div id="welcomeMessage" style="margin-top: 15px; font-size: 1.3em; font-weight: bold; display: none;"></div>
        </div>

        <div class="progress-section">
            <h2>ğŸ“Š ì „ì²´ ì§„í–‰ë¥ </h2>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="completedSteps">0</div>
                    <div class="stat-label">ì™„ë£Œëœ ë‹¨ê³„</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">4</div>
                    <div class="stat-label">ì „ì²´ ë‹¨ê³„</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="currentTime">--ë¶„</div>
                    <div class="stat-label">í˜„ì¬ ì…‹ì—… ì‹œê°„</div>
                </div>
            </div>

            <h3 style="margin-top: 30px; color: #007bff;">ğŸ¯ ë‹¨ê³„ë³„ ëª©í‘œ</h3>
            <div class="goals">
                <div class="goal-card" id="goal1">
                    <div class="goal-title">1ë‹¨ê³„ ëª©í‘œ</div>
                    <div class="goal-time">--ë¶„</div>
                    <div>5% ë‹¨ì¶•</div>
                </div>
                <div class="goal-card" id="goal2">
                    <div class="goal-title">2ë‹¨ê³„ ëª©í‘œ</div>
                    <div class="goal-time">--ë¶„</div>
                    <div>10% ë‹¨ì¶•</div>
                </div>
                <div class="goal-card" id="goal3">
                    <div class="goal-title">3ë‹¨ê³„ ëª©í‘œ</div>
                    <div class="goal-time">--ë¶„</div>
                    <div>15% ë‹¨ì¶•</div>
                </div>
                <div class="goal-card" id="goal4">
                    <div class="goal-title">4ë‹¨ê³„ ëª©í‘œ</div>
                    <div class="goal-time">--ë¶„</div>
                    <div>20% ë‹¨ì¶•</div>
                </div>
                <div class="goal-card" id="goal5">
                    <div class="goal-title">5ë‹¨ê³„ ëª©í‘œ</div>
                    <div class="goal-time">--ë¶„</div>
                    <div>25% ë‹¨ì¶•</div>
                </div>
                <div class="goal-card" id="goal6">
                    <div class="goal-title">ìµœì¢… ëª©í‘œ</div>
                    <div class="goal-time">--ë¶„</div>
                    <div>30% ë‹¨ì¶•</div>
                </div>
            </div>
        </div>

        <div class="capd-section">
            <h2>ğŸ“‹ CAPD ë¯¸ì…˜ ë‹¨ê³„</h2>
            
            <!-- Check ë‹¨ê³„ -->
            <div class="capd-step" id="step1">
                <div class="step-header" onclick="toggleStep(1)">
                    <span>ğŸ” C - Check (í˜„ì¬ ìƒíƒœ íŒŒì•…)</span>
                    <span>â–¼</span>
                </div>
                <div class="step-content">
                    <ul class="checklist">
                        <li><input type="checkbox"> <span id="currentTimeCheck">í˜„ì¬ í‰ê·  ì…‹ì—… ì‹œê°„ ì¸¡ì • ì™„ë£Œ</span></li>
                        <li><input type="checkbox"> ê¸ˆí˜• êµì²´ ì‹œê°„ ì„¸ë¶€ ì¸¡ì • (ëª©í‘œ: ì „ì²´ì˜ 40%)</li>
                        <li><input type="checkbox"> ì¡°ê±´ ì„¤ì • ì‹œê°„ ì¸¡ì • (ëª©í‘œ: ì „ì²´ì˜ 25%)</li>
                        <li><input type="checkbox"> ì²« ì œí’ˆ ì–‘í’ˆê¹Œì§€ ì‹œê°„ ì¸¡ì • (ëª©í‘œ: ì „ì²´ì˜ 35%)</li>
                        <li><input type="checkbox"> 50í†¤~180í†¤ ì„¤ë¹„ë³„ ì°¨ì´ì  íŒŒì•…</li>
                        <li><input type="checkbox"> ì‘ì—…ìë³„ ìˆ™ë ¨ë„ ì°¨ì´ ë¶„ì„</li>
                        <li><input type="checkbox"> ê¸ˆí˜• ë³´ê´€ì†Œì—ì„œ ì„¤ë¹„ê¹Œì§€ ì´ë™ ì‹œê°„ ì¸¡ì •</li>
                        <li><input type="checkbox"> âš ï¸ í˜„ì¬ ì‘ì—… ì¤‘ ì•ˆì „ ìœ„í—˜ ìš”ì†Œ ì ê²€ ì™„ë£Œ</li>
                    </ul>
                    <button class="complete-btn" onclick="completeStep(1)" disabled>ë‹¨ê³„ ì™„ë£Œ</button>
                </div>
            </div>

            <!-- Analyze ë‹¨ê³„ -->
            <div class="capd-step" id="step2">
                <div class="step-header" onclick="toggleStep(2)">
                    <span>ğŸ” A - Analyze (ë¶„ì„)</span>
                    <span>â–¼</span>
                </div>
                <div class="step-content">
                    <ul class="checklist">
                        <li><input type="checkbox"> ê°€ì¥ ì‹œê°„ ì†Œëª¨ê°€ í° 3ê°€ì§€ ì‘ì—… ì‹ë³„</li>
                        <li><input type="checkbox"> ëŒ€ê¸° ì‹œê°„ ë°œìƒ êµ¬ê°„ ë¶„ì„ (ì˜¨ë„ ëŒ€ê¸°, í¬ë ˆì¸ ëŒ€ê¸° ë“±)</li>
                        <li><input type="checkbox"> ë°˜ë³µì  ë¶ˆí•„ìš” ì‘ì—… ëª©ë¡ ì‘ì„±</li>
                        <li><input type="checkbox"> ë„êµ¬/ìì¬ ì°¾ëŠ” ì‹œê°„ ë¶„ì„</li>
                        <li><input type="checkbox"> ê¸ˆí˜•ë³„ í‘œì¤€í™” ê°€ëŠ¥ ë¶€ë¶„ ì¡°ì‚¬</li>
                        <li><input type="checkbox"> ìˆ™ë ¨ì vs ì´ˆê¸‰ì ì‘ì—… ë°©ì‹ ì°¨ì´ ë¶„ì„</li>
                        <li><input type="checkbox"> ì»¨ë„¥í„° ì •ë°€ë„ ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ì¸í•œ ì¶”ê°€ ì‹œê°„ ë¶„ì„</li>
                        <li><input type="checkbox"> âš ï¸ ì‹œê°„ ë‹¨ì¶•ìœ¼ë¡œ ì¸í•œ ì•ˆì „ ìœ„í—˜ ìš”ì†Œ ë¶„ì„</li>
                    </ul>
                    <button class="complete-btn" onclick="completeStep(2)" disabled>ë‹¨ê³„ ì™„ë£Œ</button>
                </div>
            </div>

            <!-- Plan ë‹¨ê³„ -->
            <div class="capd-step" id="step3">
                <div class="step-header" onclick="toggleStep(3)">
                    <span>ğŸ“‹ P - Plan (ê°œì„  ê³„íš)</span>
                    <span>â–¼</span>
                </div>
                <div class="step-content">
                    <ul class="checklist">
                        <li><input type="checkbox"> 5% ë‹¨ì¶• ìœ„í•œ ì¦‰ì‹œ ê°œì„ ì•ˆ 3ê°€ì§€ ìˆ˜ë¦½</li>
                        <li><input type="checkbox"> 10% ë‹¨ì¶• ìœ„í•œ ë‹¨ê¸° ê°œì„ ì•ˆ ìˆ˜ë¦½</li>
                        <li><input type="checkbox"> 15-20% ë‹¨ì¶• ìœ„í•œ ì¤‘ê¸° ê°œì„ ì•ˆ ìˆ˜ë¦½</li>
                        <li><input type="checkbox"> 25-30% ë‹¨ì¶• ìœ„í•œ ì¥ê¸° ê°œì„ ì•ˆ ìˆ˜ë¦½</li>
                        <li><input type="checkbox"> ì™¸ë¶€ ì…‹ì—… vs ë‚´ë¶€ ì…‹ì—… êµ¬ë¶„ ê³„íš</li>
                        <li><input type="checkbox"> í‘œì¤€ ì‘ì—… ìˆœì„œì„œ ì‘ì„± ê³„íš</li>
                        <li><input type="checkbox"> ì œí’ˆë³„ ìµœì  ì¡°ê±´ DB êµ¬ì¶• ê³„íš</li>
                        <li><input type="checkbox"> íˆ¬ì ë¹„ìš© vs íš¨ê³¼ ë¶„ì„ ì™„ë£Œ</li>
                        <li><input type="checkbox"> âš ï¸ ëª¨ë“  ê°œì„  ê³„íšì— ì•ˆì „ ê²€í†  í¬í•¨</li>
                    </ul>
                    <button class="complete-btn" onclick="completeStep(3)" disabled>ë‹¨ê³„ ì™„ë£Œ</button>
                </div>
            </div>

            <!-- Do ë‹¨ê³„ -->
            <div class="capd-step" id="step4">
                <div class="step-header" onclick="toggleStep(4)">
                    <span>âš¡ D - Do (ì‹¤í–‰ ë° ê²€ì¦)</span>
                    <span>â–¼</span>
                </div>
                <div class="step-content">
                    <ul class="checklist">
                        <li><input type="checkbox"> 1-2ë‹¨ê³„ ê°œì„ ì•ˆ ì‹¤í–‰ (ëª©í‘œ: 5-10% ë‹¨ì¶• ë‹¬ì„±)</li>
                        <li><input type="checkbox"> 1ì£¼ì¼ê°„ íš¨ê³¼ ì¸¡ì • ë° ë°ì´í„° ìˆ˜ì§‘</li>
                        <li><input type="checkbox"> 3-4ë‹¨ê³„ ê°œì„ ì•ˆ ì‹¤í–‰ (ëª©í‘œ: 15-20% ë‹¨ì¶• ë‹¬ì„±)</li>
                        <li><input type="checkbox"> ì „ì²´ ì‘ì—…ì êµìœ¡ ë° í‘œì¤€í™” ì ìš©</li>
                        <li><input type="checkbox"> 5ë‹¨ê³„ ê°œì„ ì•ˆ ì‹¤í–‰ (ëª©í‘œ: 25% ë‹¨ì¶• ë‹¬ì„±)</li>
                        <li><input type="checkbox"> ìµœì¢… ëª©í‘œ ë‹¬ì„± ê²€ì¦ (ëª©í‘œ: 30% ë‹¨ì¶•)</li>
                        <li><input type="checkbox"> ì§€ì†ì  ê°œì„ ì„ ìœ„í•œ ëª¨ë‹ˆí„°ë§ ì²´ê³„ êµ¬ì¶•</li>
                        <li><input type="checkbox"> ì„±ê³¼ ê³µìœ  ë° ìš°ìˆ˜ ì‚¬ë¡€ ë¬¸ì„œí™”</li>
                        <li><input type="checkbox"> âš ï¸ ê°œì„ ëœ ì‘ì—…ì˜ ì•ˆì „ì„± ìµœì¢… ê²€ì¦ ì™„ë£Œ</li>
                    </ul>
                    <button class="complete-btn" onclick="completeStep(4)" disabled>ë¯¸ì…˜ ì™„ë£Œ!</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ì„±ì·¨ ëª¨ë‹¬ -->
    <div class="achievement-modal" id="achievementModal">
        <div class="achievement-content">
            <div class="achievement-icon" id="achievementIcon">ğŸ‰</div>
            <div class="achievement-title" id="achievementTitle">ì¶•í•˜í•©ë‹ˆë‹¤!</div>
            <div class="achievement-message" id="achievementMessage">ì²« ë²ˆì§¸ ë‹¨ê³„ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!</div>
            <button class="continue-btn" onclick="closeModal()">ê³„ì† í™”ì´íŒ…! ğŸš€</button>
        </div>
    </div>

    <script>
        let completedSteps = 0;
        let currentSetupTime = 40;
        let initialSetupTime = 40;
        let workerName = "";
        let goalTimes = [38, 36, 34]; // ë™ì ìœ¼ë¡œ ê³„ì‚°ë  ì˜ˆì •
        const achievements = [
            {
                icon: "ğŸ¯",
                title: "ë¶„ì„ ì™„ë£Œ!",
                message: "í˜„ì¬ ìƒíƒœ íŒŒì•…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ë¬¸ì œì ì„ ì°¾ì•„ë³´ì„¸ìš”!",
                safety: "âš ï¸ ì•ˆì „ì´ ìµœìš°ì„ ì…ë‹ˆë‹¤! ë¶„ì„ ê³¼ì •ì—ì„œë„ ì•ˆì „ ìˆ˜ì¹™ì„ ì² ì €íˆ ì¤€ìˆ˜í•˜ì„¸ìš”.",
                encouragement: "ğŸ’ª í›Œë¥­í•œ ì‹œì‘ì…ë‹ˆë‹¤! ì •í™•í•œ ë¶„ì„ì´ ì„±ê³µì˜ ì²«ê±¸ìŒì´ì—ìš”!"
            },
            {
                icon: "ğŸ”",
                title: "ë¬¸ì œ ë°œê²¬!",
                message: "ë¹„íš¨ìœ¨ ìš”ì¸ì„ ëª¨ë‘ ì°¾ì•˜ìŠµë‹ˆë‹¤. ê°œì„  ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”!",
                safety: "âš ï¸ ì•ˆì „ì´ ìµœìš°ì„ ì…ë‹ˆë‹¤! ë¬¸ì œ í•´ê²° ì‹œì—ë„ ì•ˆì „í•œ ì‘ì—… ë°©ë²•ì„ ìš°ì„  ê³ ë ¤í•˜ì„¸ìš”.",
                encouragement: "ğŸ”¥ ëŒ€ë‹¨í•©ë‹ˆë‹¤! ë¬¸ì œë¥¼ ì •í™•íˆ íŒŒì•…í•˜ëŠ” ê²ƒì€ ê°œì„ ì˜ í•µì‹¬ì´ì—ìš”!"
            },
            {
                icon: "ğŸ“‹",
                title: "ê³„íš ìˆ˜ë¦½!",
                message: "ì™„ë²½í•œ ê°œì„  ê³„íšì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ì‹¤í–‰ ë‹¨ê³„ì…ë‹ˆë‹¤!",
                safety: "âš ï¸ ì•ˆì „ì´ ìµœìš°ì„ ì…ë‹ˆë‹¤! ëª¨ë“  ê°œì„  ê³„íšì— ì•ˆì „ ê²€í† ë¥¼ í¬í•¨ì‹œí‚¤ì„¸ìš”.",
                encouragement: "ğŸš€ ë©‹ì§„ ê³„íšì´ë„¤ìš”! ì²´ê³„ì ì¸ ì¤€ë¹„ê°€ ì„±ê³µì„ ë³´ì¥í•©ë‹ˆë‹¤!"
            },
            {
                icon: "ğŸ†",
                title: "ë¯¸ì…˜ ì™„ì„±!",
                message: "ëª¨ë“  CAPD ë‹¨ê³„ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ì…‹ì—… ë§ˆìŠ¤í„°ê°€ ë˜ì…¨ìŠµë‹ˆë‹¤!",
                safety: "âš ï¸ ì•ˆì „ì´ ìµœìš°ì„ ì…ë‹ˆë‹¤! ê°œì„ ëœ ì‘ì—…ì—ì„œë„ í•­ìƒ ì•ˆì „ì„ ìµœìš°ì„ ìœ¼ë¡œ í•˜ì„¸ìš”.",
                encouragement: "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ë‹¹ì‹ ì€ ì´ì œ ì§„ì •í•œ ì…‹ì—… ë§ˆìŠ¤í„°ì…ë‹ˆë‹¤! ì´ ì„±ê³¼ë¥¼ ë™ë£Œë“¤ê³¼ ê³µìœ í•˜ê³  ë” í° ë°œì „ì„ ì´ë¤„ë‚˜ê°€ì„¸ìš”!"
            }
        ];

        function calculateGoalTimes(baseTime) {
            return [
                Math.round(baseTime * 0.95 * 10) / 10, // 5% ë‹¨ì¶•
                Math.round(baseTime * 0.90 * 10) / 10, // 10% ë‹¨ì¶•
                Math.round(baseTime * 0.85 * 10) / 10, // 15% ë‹¨ì¶•
                Math.round(baseTime * 0.80 * 10) / 10, // 20% ë‹¨ì¶•
                Math.round(baseTime * 0.75 * 10) / 10, // 25% ë‹¨ì¶•
                Math.round(baseTime * 0.70 * 10) / 10  // 30% ë‹¨ì¶•
            ];
        }

        function updateGoalCards() {
            if (goalTimes.length < 6) return; // ëª©í‘œ ì‹œê°„ì´ ê³„ì‚°ë˜ì§€ ì•Šì€ ê²½ìš° ë¦¬í„´
            
            const percentages = [5, 10, 15, 20, 25, 30];
            
            for (let i = 0; i < 6; i++) {
                document.querySelector(`#goal${i+1} .goal-time`).textContent = goalTimes[i] + 'ë¶„';
                
                const savings = Math.round((initialSetupTime - goalTimes[i]) * 10) / 10;
                document.querySelector(`#goal${i+1} div:last-child`).textContent = 
                    `${percentages[i]}% ë‹¨ì¶• (${savings}ë¶„ ì ˆì•½)`;
            }
        }

        function setWorkerName() {
            const nameInput = document.getElementById('workerName');
            const timeInput = document.getElementById('currentSetupTime');
            const name = nameInput.value.trim();
            const setupTime = parseFloat(timeInput.value);
            
            if (name === "") {
                alert("ì‘ì—…ì ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                nameInput.focus();
                return;
            }
            
            if (!setupTime || setupTime <= 0) {
                alert("í˜„ì¬ ì…‹ì—…ì‹œê°„ì„ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                timeInput.focus();
                return;
            }
            
            workerName = name;
            initialSetupTime = setupTime;
            currentSetupTime = setupTime;
            goalTimes = calculateGoalTimes(setupTime);
            
            const welcomeMsg = document.getElementById('welcomeMessage');
            welcomeMsg.innerHTML = `${workerName}ë‹˜, í˜„ì¬ ${setupTime}ë¶„ì—ì„œ ${goalTimes[2]}ë¶„ìœ¼ë¡œ ë‹¨ì¶•ì— ë„ì „í•˜ì„¸ìš”! ğŸ’ª`;
            welcomeMsg.style.display = 'block';
            
            // ëª©í‘œ ì¹´ë“œ ì—…ë°ì´íŠ¸
            updateGoalCards();
            updateInitialDisplay();
            
            // ì²« ë²ˆì§¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ í•­ëª© ì—…ë°ì´íŠ¸
            document.getElementById('currentTimeCheck').textContent = 
                `í˜„ì¬ í‰ê·  ì…‹ì—… ì‹œê°„ ${setupTime}ë¶„ ì¸¡ì • ì™„ë£Œ`;
            
            // ì…ë ¥ í•„ë“œì™€ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
            nameInput.style.display = 'none';
            timeInput.style.display = 'none';
            timeInput.previousElementSibling.style.display = 'none'; // "í˜„ì¬ ì…‹ì—…ì‹œê°„:" ë¼ë²¨
            timeInput.nextElementSibling.style.display = 'none'; // "ë¶„" ë¼ë²¨
            document.getElementById('nameBtn').style.display = 'none';
            
            // ì²« ë²ˆì§¸ ë‹¨ê³„ í™œì„±í™”
            toggleStep(1);
        }

        function toggleStep(stepNum) {
            const content = document.querySelector(`#step${stepNum} .step-content`);
            const header = document.querySelector(`#step${stepNum} .step-header span:last-child`);
            
            if (content.classList.contains('active')) {
                content.classList.remove('active');
                header.textContent = 'â–¼';
            } else {
                content.classList.add('active');
                header.textContent = 'â–²';
            }
        }

        function updateProgress() {
            const progress = (completedSteps / 4) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('completedSteps').textContent = completedSteps;
            
            // ëª©í‘œ ë‹¬ì„± ì²´í¬ (CAPD ë‹¨ê³„ì— ë”°ë¼ 6ë‹¨ê³„ ëª©í‘œ ë‹¬ì„±)
            if (completedSteps >= 1 && goalTimes.length >= 6) {
                // CAPD 1ë‹¨ê³„ ì™„ë£Œ â†’ ëª©í‘œ 1-2ë‹¨ê³„ ë‹¬ì„± (5%, 10%)
                document.getElementById('goal1').classList.add('achieved');
                document.getElementById('goal2').classList.add('achieved');
                currentSetupTime = goalTimes[1]; // 10% ë‹¨ì¶•ê¹Œì§€ ë‹¬ì„±
            }
            if (completedSteps >= 2 && goalTimes.length >= 6) {
                // CAPD 2ë‹¨ê³„ ì™„ë£Œ â†’ ëª©í‘œ 3-4ë‹¨ê³„ ë‹¬ì„± (15%, 20%)
                document.getElementById('goal3').classList.add('achieved');
                document.getElementById('goal4').classList.add('achieved');
                currentSetupTime = goalTimes[3]; // 20% ë‹¨ì¶•ê¹Œì§€ ë‹¬ì„±
            }
            if (completedSteps >= 3 && goalTimes.length >= 6) {
                // CAPD 3ë‹¨ê³„ ì™„ë£Œ â†’ ëª©í‘œ 5ë‹¨ê³„ ë‹¬ì„± (25%)
                document.getElementById('goal5').classList.add('achieved');
                currentSetupTime = goalTimes[4]; // 25% ë‹¨ì¶•ê¹Œì§€ ë‹¬ì„±
            }
            if (completedSteps >= 4 && goalTimes.length >= 6) {
                // CAPD 4ë‹¨ê³„ ì™„ë£Œ â†’ ìµœì¢… ëª©í‘œ ë‹¬ì„± (30%)
                document.getElementById('goal6').classList.add('achieved');
                currentSetupTime = goalTimes[5]; // 30% ë‹¨ì¶• ë‹¬ì„±
            }
            
            document.getElementById('currentTime').textContent = currentSetupTime + 'ë¶„';
        }

        function updateInitialDisplay() {
            // ì´ˆê¸° ì„¤ì •ì‹œ í˜„ì¬ ì‹œê°„ í‘œì‹œ (ì§„í–‰ë¥  ê³„ì‚° ì—†ì´)
            document.getElementById('currentTime').textContent = currentSetupTime + 'ë¶„';
            document.getElementById('progressBar').style.width = '0%';
            document.getElementById('completedSteps').textContent = '0';
        }

        function completeStep(stepNum) {
            document.getElementById(`step${stepNum}`).classList.add('completed');
            completedSteps++;
            updateProgress();
            showAchievement(stepNum - 1);
        }

        function showAchievement(index) {
            const modal = document.getElementById('achievementModal');
            const achievement = achievements[index];
            
            document.getElementById('achievementIcon').textContent = achievement.icon;
            document.getElementById('achievementTitle').textContent = `${workerName}ë‹˜ ${achievement.title}`;
            
            // ê¸°ë³¸ ë©”ì‹œì§€ + ì•ˆì „ ë©”ì‹œì§€ + ì‘ì› ë©”ì‹œì§€
            let fullMessage = achievement.message + '<br><br>' + achievement.safety + '<br><br>' + achievement.encouragement;
            
            // ë§ˆì§€ë§‰ ë‹¨ê³„ ì™„ë£Œì‹œ íŠ¹ë³„ ë©”ì‹œì§€
            if (index === 3) {
                const reductionPercent = Math.round(((initialSetupTime - goalTimes[5]) / initialSetupTime) * 100);
                const timeSaved = Math.round((initialSetupTime - goalTimes[5]) * 10) / 10;
                fullMessage = `${workerName}ë‹˜ì´ ì…‹ì—… ë§ˆìŠ¤í„°ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤!<br>` +
                             `${initialSetupTime}ë¶„ì—ì„œ ${goalTimes[5]}ë¶„ìœ¼ë¡œ ${reductionPercent}% ë‹¨ì¶• ë‹¬ì„±! (${timeSaved}ë¶„ ì ˆì•½)<br><br>` +
                             achievement.safety + '<br><br>' + achievement.encouragement;
            }
            
            document.getElementById('achievementMessage').innerHTML = fullMessage;
            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('achievementModal').style.display = 'none';
        }

        // ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.addEventListener('change', function(e) {
            if (e.target.type === 'checkbox') {
                const stepContent = e.target.closest('.step-content');
                const checkboxes = stepContent.querySelectorAll('input[type="checkbox"]');
                const completeBtn = stepContent.querySelector('.complete-btn');
                
                const allChecked = Array.from(checkboxes).every(cb => cb.checked);
                completeBtn.disabled = !allChecked;
            }
        });

        // ì—”í„°í‚¤ë¡œ ì´ë¦„ ì…ë ¥
        document.getElementById('workerName').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                setWorkerName();
            }
        });

        // ì—”í„°í‚¤ë¡œ ì‹œê°„ ì…ë ¥
        document.getElementById('currentSetupTime').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                setWorkerName();
            }
        });
    </script>
</body>
</html>